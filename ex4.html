<!DOCTYPE html>
<html>
<head>
  <title>error box callbacks</title>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="error_box.css" type="text/css"/>
  <style type="text/css">
    #err_cntr {
      color: red;
      display: none;
    }
    #err_cntr.show {
      display: inline-block;
    }
  </style>
  <script src="error_box.js" type="text/javascript">
  </script>
  <script type="text/javascript">
    var errbox;

    function init()
    {
      errbox = new error_box(document.getElementById("err_cntr"), show_cb);
    }
    function check(ev)
    {
      var sum;

      sum = ev.target.value;
      if ((sum != "") && (sum.match(/^[0-9]+(\.[0-9]+)?$/) == null)) {
        errbox.show(ev.target.name + ": wrong sum: " + sum, {tag: ev.target.name});
        return;
      }
      errbox.hide({tag: ev.target.name});
    }
    function show_cb(emsg, opts)
    {
      var d = new Date();

      return d.toLocaleDateString() + " " + d.toLocaleTimeString() + ": " + emsg;
    }
  </script>
</head>
<body onload="init()">
<div id="err_cntr">
</div>

<div class="item">
  <div><input type="text" name="sum1" oninput="check(event)"/></div>
</div>

<div class="item">
  <div><input type="text" name="sum2" oninput="check(event)"/></div>
</div>

<div class="item">
  <div><input type="text" name="sum3" oninput="check(event)"/></div>
</div>

</body>
</html>
